{"code":"(this[\"webpackJsonpphoto-app-react\"]=this[\"webpackJsonpphoto-app-react\"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){\"use strict\";n.r(t);var o=n(1),s=n.n(o),c=n(3),i=n.n(c),r=n(4),a=n(5),d=n(7),l=n(6),h=n(0),u=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:\"render\",value:function(){return Object(h.jsxs)(\"div\",{children:[Object(h.jsx)(\"nav\",{className:\"main-nav\",children:Object(h.jsx)(\"h1\",{children:\"Photo App\"})}),Object(h.jsxs)(\"aside\",{children:[Object(h.jsx)(\"header\",{children:\"Profile\"}),Object(h.jsxs)(\"div\",{className:\"suggestions\",children:[Object(h.jsx)(\"p\",{className:\"suggestion-text\",children:\"Suggestions for you\"}),Object(h.jsx)(\"div\",{children:\"Suggestions\"})]})]}),Object(h.jsxs)(\"main\",{className:\"content\",children:[Object(h.jsx)(\"header\",{className:\"stories\",children:\"Stories\"}),Object(h.jsx)(\"div\",{id:\"posts\",children:\"Posts\"})]})]})}}]),n}(s.a.Component),j=u;n(13);function p(e){for(var t=e+\"=\",n=decodeURIComponent(document.cookie).split(\";\"),o=0;o<n.length;o++){for(var s=n[o];\" \"===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return\"\"}function b(){i.a.render(Object(h.jsx)(j,{}),document.getElementById(\"root\"))}p(\"csrf_access_token\")&&\"3000\"!==window.location.port?(console.log(\"Authentication handled via CSRF + Http-only cookie.\"),b()):(console.log(\"3000\"===window.location.port),console.log(\"Authentication handled via REST API Token.\"),function(e,t,n){var o={username:e,password:t};fetch(\"/api/token/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){!function(e,t){var n=new Date;n.setTime(n.getTime()+31536e6);var o=\"expires=\"+n.toUTCString();document.cookie=e+\"=\"+t+\";\"+o}(\"access_token_cookie_js\",e.access_token),n()}))}(\"webdev\",\"password\",b))}},[[14,1,2]]]);","name":"static/js/main.f914082c.chunk.js","map":{"version":3,"sources":["static/js/main.f914082c.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","classCallCheck","createClass","inherits","createSuper","jsx_runtime","App_App","_React$Component","Object","App","_super","apply","arguments","key","value","children","className","id","a","Component","src_App","getCookie","name","ca","decodeURIComponent","document","cookie","split","i","length","c","charAt","substring","indexOf","renderApp","render","getElementById","window","location","port","console","log","username","password","callback","postData","fetch","method","headers","body","JSON","stringify","then","response","json","data","val","d","Date","setTime","getTime","days","expires","toUTCString","setCookie","access_token","setAccessTokenCookie"],"mappings":"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"},"input":"(this[\"webpackJsonpphoto-app-react\"] = this[\"webpackJsonpphoto-app-react\"] || []).push([[0],{\n\n/***/ 13:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(3);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createSuper.js + 5 modules\nvar createSuper = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/App.js\n{/* TODO: Break up the HTML below into a series of React components. */}var App_App=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(App,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(App);function App(){Object(classCallCheck[\"a\" /* default */])(this,App);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(App,[{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"nav\",{className:\"main-nav\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Photo App\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"aside\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"header\",{children:\"Profile\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"suggestions\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"suggestion-text\",children:\"Suggestions for you\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:\"Suggestions\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"main\",{className:\"content\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"header\",{className:\"stories\",children:\"Stories\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"posts\",children:\"Posts\"})]})]});}}]);return App;}(react_default.a.Component);/* harmony default export */ var src_App = (App_App);\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(13);\n\n// CONCATENATED MODULE: ./src/utils.js\nfunction getCookie(key){var name=key+\"=\";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===' '){c=c.substring(1);}if(c.indexOf(name)===0){return c.substring(name.length,c.length);}}return\"\";}function setCookie(name,val){var d=new Date();var days=365;d.setTime(d.getTime()+days*24*60*60*1000);var expires=\"expires=\"+d.toUTCString();document.cookie=name+\"=\"+val+\";\"+expires;}function setAccessTokenCookie(username,password,callback){var postData={\"username\":username,\"password\":password};fetch(\"/api/token/\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(postData)}).then(function(response){return response.json();}).then(function(data){var token=data.access_token;setCookie('access_token_cookie_js',token);callback();});}function hasCsrfToken(){return getCookie('csrf_access_token');// || token;\n}function getAccessTokenCookie(){return getCookie('access_token_cookie_js');// || token;\n}function getHeaders(){var access_token_cookie_js=getCookie('access_token_cookie_js');var csrf_access_token=getCookie('csrf_access_token');var headers;if(csrf_access_token&&window.location.port!=='3000'){headers={'Content-Type':'application/json','X-CSRF-TOKEN':csrf_access_token};}else if(access_token_cookie_js){headers={'Content-Type':'application/json','Authorization':'Bearer '+access_token_cookie_js};}else{console.error('Neither access_token_cookie nor csrf_access_token found');}return headers;}\n// CONCATENATED MODULE: ./src/index.js\nfunction renderApp(){react_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));}/**************************************************************\n * Authentication\n **************************************************************\n * There are two authentication pathways handled here:\n * 1. The hasCsrfToken() pathway is used if React is being\n *    served on the same server as the REST API (and uses the\n *    Flask server-side login form). For production deployment\n *    only.\n * \n * 2. The setAccessTokenCookie() pathway is used if you have\n *    created a stand-alone react app that is interacting with\n *    the REST API on another server. This one is the one used\n *    for testing (when using npm start).\n **************************************************************\n */ // this initializes the app after the access token is set.\nif(hasCsrfToken()&&window.location.port!=='3000'){// this executes if the app is run within flask:\nconsole.log('Authentication handled via CSRF + Http-only cookie.');renderApp();}else{console.log(window.location.port==='3000');// this executes if the app is run via npm start\nconsole.log('Authentication handled via REST API Token.');setAccessTokenCookie('webdev','password',renderApp);}\n\n/***/ })\n\n},[[14,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/gabebider/Documents/Northwestern Classes/2021-2022/Spring Quarter/WebDev/webdev-labs/lab10/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/gabebider/Documents/Northwestern Classes/2021-2022/Spring Quarter/WebDev/webdev-labs/lab10/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/gabebider/Documents/Northwestern Classes/2021-2022/Spring Quarter/WebDev/webdev-labs/lab10/node_modules/postcss-loader/src/index.js??postcss!/Users/gabebider/Documents/Northwestern Classes/2021-2022/Spring Quarter/WebDev/webdev-labs/lab10/src/index.css","/Users/gabebider/Documents/Northwestern Classes/2021-2022/Spring Quarter/WebDev/webdev-labs/lab10/src/App.js","/Users/gabebider/Documents/Northwestern Classes/2021-2022/Spring Quarter/WebDev/webdev-labs/lab10/src/utils.js","/Users/gabebider/Documents/Northwestern Classes/2021-2022/Spring Quarter/WebDev/webdev-labs/lab10/src/index.js"],"names":["App","React","Component","getCookie","key","name","decodedCookie","decodeURIComponent","document","cookie","ca","split","i","length","c","charAt","substring","indexOf","setCookie","val","d","Date","days","setTime","getTime","expires","toUTCString","setAccessTokenCookie","username","password","callback","postData","fetch","method","headers","body","JSON","stringify","then","response","json","data","token","access_token","hasCsrfToken","getAccessTokenCookie","getHeaders","access_token_cookie_js","csrf_access_token","window","location","port","console","error","renderApp","ReactDOM","render","getElementById","log"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","import React from 'react';\n\n{/* TODO: Break up the HTML below into a series of React components. */}\nclass App extends React.Component {  \n\n    render () {\n        return (\n            <div>\n\n            <nav className=\"main-nav\">\n                <h1>Photo App</h1>\n                {/* Navigation Links */}\n            </nav>\n\n            <aside>\n                <header>\n                    Profile\n                    {/* Navigation Links */}\n                </header>\n                <div className=\"suggestions\">\n                    <p className=\"suggestion-text\">Suggestions for you</p>\n                    <div>\n                        Suggestions\n                        {/* Suggestions */}\n                    </div>\n                </div>\n            </aside>\n\n            <main className=\"content\">\n                <header className=\"stories\">\n                    Stories\n                    {/* Stories */}\n                </header>\n                <div id=\"posts\">\n                    Posts\n                    {/* Posts */}\n                </div>\n            </main>\n\n            </div>\n        );\n    }\n}\n\nexport default App;","function getCookie (key) {\n    let name = key + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) === 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\nfunction setCookie(name, val) {\n    const d = new Date();\n    const days = 365;\n    d.setTime(d.getTime() + (days*24*60*60*1000));\n    const expires = \"expires=\"+ d.toUTCString();\n    document.cookie = name + \"=\" + val + \";\" + expires;\n  }\n\nexport function setAccessTokenCookie(username, password, callback) {\n    const postData = {\n        \"username\": username,\n        \"password\": password\n    };\n    fetch(\"/api/token/\", {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(postData)\n        })\n        .then(response => response.json())\n        .then(data => {\n            const token = data.access_token;\n            setCookie('access_token_cookie_js', token); \n            callback();\n        });\n}\n\nexport function hasCsrfToken () {\n    return getCookie('csrf_access_token'); // || token;\n}\n\nexport function getAccessTokenCookie () {\n    return getCookie('access_token_cookie_js'); // || token;\n}\n\nexport function getHeaders () {\n    const access_token_cookie_js = getCookie('access_token_cookie_js');\n    const csrf_access_token = getCookie('csrf_access_token');\n    let headers;\n    if (csrf_access_token && window.location.port !== '3000') {\n        headers = {\n            'Content-Type': 'application/json',\n            'X-CSRF-TOKEN': csrf_access_token\n        };\n    } else if (access_token_cookie_js) {\n        headers = {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + access_token_cookie_js\n        };\n    } else {\n        console.error('Neither access_token_cookie nor csrf_access_token found')\n    }\n    return headers;\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport {hasCsrfToken, setAccessTokenCookie} from './utils';\n\nfunction renderApp() {\n    ReactDOM.render(\n        <App />,\n        document.getElementById('root')\n    );\n}\n\n/**************************************************************\n * Authentication\n **************************************************************\n * There are two authentication pathways handled here:\n * 1. The hasCsrfToken() pathway is used if React is being\n *    served on the same server as the REST API (and uses the\n *    Flask server-side login form). For production deployment\n *    only.\n * \n * 2. The setAccessTokenCookie() pathway is used if you have\n *    created a stand-alone react app that is interacting with\n *    the REST API on another server. This one is the one used\n *    for testing (when using npm start).\n **************************************************************\n */\n\n// this initializes the app after the access token is set.\nif (hasCsrfToken() && window.location.port !== '3000') {\n    // this executes if the app is run within flask:\n    console.log('Authentication handled via CSRF + Http-only cookie.')\n    renderApp();\n} else {\n    console.log(window.location.port === '3000')\n    // this executes if the app is run via npm start\n    console.log('Authentication handled via REST API Token.')\n    setAccessTokenCookie('webdev', 'password', renderApp);\n}"]}}