{"ast":null,"code":"var _jsxFileName = \"/Users/abalamurugan/Desktop/photo-app-react/src/Suggestion.js\";\nimport React from 'react';\nimport { getHeaders } from './utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Suggestion extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      suggestion: this.props.model\n    };\n    this.toggleFollow = this.toggleFollow.bind(this);\n    this.follow = this.follow.bind(this);\n    this.unfollow = this.unfollow.bind(this);\n    this.followingId = -1;\n    this.followText = \"follow\";\n  }\n\n  toggleFollow() {\n    if (this.followingId !== -1) {\n      this.unfollow();\n    } else {\n      this.follow();\n    }\n  }\n\n  follow() {\n    const postData = {\n      user_id: this.state.suggestion.id\n    };\n    fetch('/api/following/', {\n      method: \"POST\",\n      headers: getHeaders(),\n      body: JSON.stringify(postData)\n    }).then(response => response.json()).then(data => {\n      this.followingId = data.id;\n      this.followText = \"unfollow\";\n    });\n  }\n\n  unfollow() {\n    // issue delete request\n    const deleteURL = 'api/following/' + this.followingId;\n    fetch(deleteURL, {\n      method: \"DELETE\",\n      headers: getHeaders()\n    }).then(response => response.json()).then(data => {\n      // this.props.remakePost()\n      console.log(data);\n      this.followingId = -1;\n      this.followText = \"follow\";\n    });\n  }\n\n  render() {\n    const suggestion = this.state.suggestion;\n\n    if (!suggestion) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"suggestion\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"suggestion\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: suggestion.thumb_url,\n          alt: suggestion.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"username\",\n            children: suggestion.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"suggestion-text\",\n            children: \"suggested for you\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"follow\",\n            \"aria-label\": \"Follow\",\n            \"data-user-id\": suggestion.id,\n            onClick: this.toggleFollow,\n            children: \"follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Suggestion;","map":{"version":3,"sources":["/Users/abalamurugan/Desktop/photo-app-react/src/Suggestion.js"],"names":["React","getHeaders","Suggestion","Component","constructor","props","state","suggestion","model","toggleFollow","bind","follow","unfollow","followingId","followText","postData","user_id","id","fetch","method","headers","body","JSON","stringify","then","response","json","data","deleteURL","console","log","render","thumb_url","username"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {getHeaders} from './utils';\n\nclass Suggestion extends React.Component {  \n\n    constructor(props) {\n        super(props);\n        this.state = {\n            suggestion: this.props.model\n        }\n        this.toggleFollow = this.toggleFollow.bind(this);\n        this.follow = this.follow.bind(this);\n        this.unfollow = this.unfollow.bind(this);\n        this.followingId = -1;\n        this.followText = \"follow\"\n    }\n\n    toggleFollow() {\n        if(this.followingId !== -1) {\n            this.unfollow();\n        } else {\n            this.follow();\n        }\n    }\n\n   follow () {\n        const postData = {\n            user_id: this.state.suggestion.id\n        };\n        \n        fetch('/api/following/', {\n                method: \"POST\",\n                headers: getHeaders(),\n                body: JSON.stringify(postData)\n            })\n            .then(response => response.json())\n            .then(data => {\n            this.followingId = data.id;\n            this.followText = \"unfollow\"\n        })\n    };\n    \n    unfollow() {\n        // issue delete request\n        const deleteURL ='api/following/' + this.followingId;\n        fetch(deleteURL, {\n                method: \"DELETE\",\n                headers: getHeaders()\n            })\n            .then(response => response.json())\n            .then(data => {\n            // this.props.remakePost()\n            console.log(data)\n            this.followingId = -1;  \n            this.followText = \"follow\"\n        })\n    };\n    \n    \n    render () {\n        const suggestion = this.state.suggestion;\n        if (!suggestion) {\n            return (\n                <div></div>  \n            );\n        }\n        return (\n            <section className=\"suggestion\">\n                <div className=\"suggestion\">\n                    <img src={suggestion.thumb_url} alt = {suggestion.username} />\n                    <div>\n                        <p className=\"username\">{suggestion.username}</p>\n                        <p className=\"suggestion-text\">suggested for you</p>\n                    </div>\n                    <div>\n                        <button className = \"follow\" \n                        aria-label = \"Follow\"\n                        data-user-id = {suggestion.id} \n                        onClick = {this.toggleFollow}>follow</button>\n                    </div>\n                </div>\n            </section> \n        );     \n    }\n}\n\nexport default Suggestion;"]},"metadata":{},"sourceType":"module"}